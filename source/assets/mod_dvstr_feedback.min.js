/* Devstratum JMM Feedback | v1.1 | MIT License | Author: Sergey Osipov | https://devstratum.ru | info@devstratum.ru | https://github.com/devstratum/Devstratum-JMM-Feedback */
jQuery(document).ready(function(v){var e=v(".dvstr-feedback"),s=e.find(".dvstr-feedback__privacy"),d=e.find(".dvstr-feedback__submit"),a=s.find(".privacy-checkbox"),r=d.find(".submit-button");a.on("click",function(){var e=v(this).data("form-id"),s=v("#dvstr_feedback_"+e).find(".submit-button");v(this).hasClass("checked")?(v(this).removeClass("checked"),s.addClass("disabled"),s.prop("disabled",!0)):(v(this).addClass("checked"),s.removeClass("disabled"),s.prop("disabled",!1))}),r.on("click",function(){var l,c,e,s,d;v(this).hasClass("disabled")||(v(this).addClass("freeze"),l=v(this).data("form-id"),e=(c=v("#dvstr_feedback_"+l)).find(".dvstr-feedback__progress"),c.find(".dvstr-feedback__alert").html(""),""===(d="",(s=c).find(".dvstr-field.required").removeClass("error"),s.find(".dvstr-field.required").each(function(){v(this).val()&&""!==v(this).val()&&"undefined"!==v(this).val()||(v(this).addClass("error"),d="error")}),d)?(e.addClass("active"),setTimeout(function(){var s,e,d,a,r,t,i;e=l,d=(s=c).find(".submit-button"),a=s.find(".dvstr-feedback__progress"),r=s.find(".dvstr-feedback__alert"),t=s.find("form").serializeArray(),i={option:"com_ajax",module:"dvstr_feedback",format:"json",mod_id:e,fields:t},v.ajax({type:"POST",data:i}).done(function(e){d.removeClass("freeze"),a.removeClass("active"),e.success&&e.data&&(r.html(e.data.info),e.data.clear&&s.find(".dvstr-field").val("")),e.success&&!e.data&&r.html('<div class="dvstr-alert dvstr-alert-warning">Form Data Empty</div>'),!e.success&&e.message&&r.html('<div class="dvstr-alert dvstr-alert-danger">'+e.message+"</div>")}).fail(function(){d.removeClass("freeze"),a.removeClass("active"),r.html('<div class="dvstr-alert dvstr-alert-danger">Server Error</div>')})},1e3)):v(this).removeClass("freeze"))})});